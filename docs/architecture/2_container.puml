@startuml Container Diagram
!include common.puml

Person(user, "用户", "想记录屏幕使用时间")

System_Boundary(c1, "ScreenTimeTracker System") {
    
    Container(web_ui, "Web UI", "Vue.js", "可视化界面。\n通过 HTTP 与后端通信。")
    
    Container(desktop_host, "Desktop App", "C#", "核心进程 (Tray + API + Worker)。\n1. 承载托盘图标与右键菜单\n2. 提供 RESTful API\n3. 执行后台监控与数据聚合")

    ContainerDb(db, "Database", "SQLite", "本地数据库存储")
    ContainerDb(json, "Database", "JSON", "本地配置文件存储")
}

System_Ext(os, "Operating System", "Windows APIs")

' 交互关系
Rel(user, desktop_host, "启动/托盘交互", "Mouse")
Rel(user, web_ui, "查看报表", "Browser")

' 前端与后端的通信
Rel(web_ui, desktop_host, "API 请求 (Localhost)", "JSON/HTTP")

' 后端与外部的交互
Rel(desktop_host, os, "采集窗口信息", "Win32 API")
Rel(desktop_host, web_ui, "托管静态文件", "Static Files")

' 数据库读写
Rel(desktop_host, db, "读写数据", "EF Core")
Rel(desktop_host, json, "读写配置", "JSON")

@enduml
