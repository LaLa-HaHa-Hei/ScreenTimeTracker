import{e as x,f as r,g as f,h as b,u as P,i as k,j as T,k as C,c as A,a as s,b as n,w as v,r as M,t as D,l as i,m as I,F as B,n as H,p as h,o as N,q as R,s as F}from"./index-CrawaA9O.js";import{f as V}from"./process-B5bCvn5w.js";import{_ as $}from"./DailyUsageChart.vue_vue_type_script_setup_true_lang-Z8QH7b6W.js";import{_ as j}from"./ProcessUsageList.vue_vue_type_script_setup_true_lang-Dzo24OV5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q=x("dailyUsage",()=>{const l=r({}),o=r({});return{hourlyUsageSummaries:l,topProcessessUsages:o,getHourlyUsageSummary:async e=>{if(!l.value[e]){const t=await f.getDailyUsageSummary(e);l.value[e]=t}return l.value[e]},getTopProcessessUsage:async e=>{if(!o.value[e]){const t=await f.getTopProcessesUsageRange(e,e,10);o.value[e]=t}return o.value[e]}}}),E={class:"rounded-xl mt-4 p-4 bg-white dark:bg-neutral-800"},O={class:"flex flex-col gap-2 items-center"},z={class:"flex items-center border border-gray-400 rounded-full py-1 px-2"},G=["disabled"],J={class:"font-bold text-lg"},K={class:"w-full"},L={class:"rounded-xl mt-4 p-4 bg-white dark:bg-neutral-800"},ee=b({__name:"DailyScreenTime",setup(l){const o=P(),c=H(),m=q(),e=r(parseInt(o.params.daysAgo)||0),t=r(new Date),g=r([]),d=r([]),p=k(()=>g.value.reduce((a,u)=>a+u,0)),w=()=>{c.push({name:"DailyScreenTime",params:{daysAgo:(e.value+1).toString()}})},S=()=>{c.push({name:"DailyScreenTime",params:{daysAgo:(e.value-1).toString()}})},U=a=>{c.push({name:"DailyProcessUsage",params:{processName:a,date:h(t.value)}})},y=async()=>{const a=new Date;a.setDate(a.getDate()-e.value),t.value=a;const u=h(t.value);g.value=await m.getHourlyUsageSummary(u),d.value=await m.getTopProcessessUsage(u)};return T(async()=>{await y()}),C(()=>o.params.daysAgo,async a=>{e.value=parseInt(a)||0,await y()}),(a,u)=>{const _=M("el-icon");return N(),A(B,null,[s("div",E,[s("div",O,[s("div",z,[s("button",{onClick:w,class:"flex items-center cursor-pointer"},[n(_,null,{default:v(()=>[n(i(R))]),_:1})]),s("span",null,D(e.value===0?"今日":e.value===1?"昨日":i(I)(t.value))+"使用时长",1),s("button",{onClick:S,disabled:e.value===0,class:"flex items-center cursor-pointer"},[n(_,null,{default:v(()=>[n(i(F))]),_:1})],8,G)]),s("span",J,D(i(V)(p.value)),1)]),s("div",K,[n($,{usage:g.value},null,8,["usage"])])]),s("div",L,[n(j,{usage:d.value,totalDurationMs:p.value,onItemClick:U},null,8,["usage","totalDurationMs"])])],64)}}});export{ee as default};
