import{L as h,f as i,i as v}from"./process-BdcFep0L.js";import{g as x,v as y,f as b,h as n,i as _,x as k,j as w,c as L,o as D}from"./index-BExF4c4S.js";const E=x({__name:"DailyUsageChart",props:{usage:{}},setup(m){const a=m,s=y(),o=b(null);let r=null;const l=n(()=>a.usage?Math.max(...a.usage):0),g=n(()=>l.value/2),u=n(()=>{if(!a.usage)return 0;const e=a.usage;return e.length?e.reduce((t,d)=>t+d,0)/e.length:0}),c=n(()=>({grid:{left:"3%",right:"100px",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{if(e&&e.length>0){const t=e[0];return`${t.axisValue}~${parseInt(t.axisValue)+1} 点<br/>${i(t.data)}`}return""}},xAxis:{type:"category",data:Array.from({length:24},(e,t)=>t.toString()),axisTick:{alignWithLabel:!0}},yAxis:{type:"value",position:"left",min:0,max:l.value,interval:g.value,splitNumber:1,axisLabel:{formatter:e=>i(e)}},series:[{type:"bar",data:a.usage?a.usage:[],itemStyle:{borderRadius:[8,8,0,0],color:new h(0,1,0,0,[{offset:0,color:"#287AF7"},{offset:1,color:"#6766EE"}])},markLine:{animationDuration:500,data:[{yAxis:u.value,label:{formatter:`平均
`+i(u.value),color:s.value?"#fff":"#000",backgroundColor:"transparent"}}]}}]})),f=()=>{r&&r.resize()},p=()=>{o.value&&(r=v(o.value),r.setOption(c.value))};return _(()=>{p(),window.addEventListener("resize",f)}),k(()=>{window.removeEventListener("resize",f)}),w([()=>a.usage,s],()=>{r&&r.setOption(c.value,!0)}),(e,t)=>(D(),L("div",{ref_key:"chartRef",ref:o,class:"w-full",style:{height:"300px"}},null,512))}});export{E as _};
