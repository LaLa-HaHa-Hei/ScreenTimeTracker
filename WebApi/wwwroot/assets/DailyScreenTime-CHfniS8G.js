import{e as x,f as n,g as b,u as P,h as k,i as T,j as C,c as A,a as s,b as r,w as f,r as M,t as v,k as i,F as I,l as B,o as H,m as N,n as R}from"./index-BExF4c4S.js";import{f as F,d as D}from"./date-xHdT8iMX.js";import{a as h,f as V}from"./process-BdcFep0L.js";import{_ as $}from"./DailyUsageChart.vue_vue_type_script_setup_true_lang-CU9D6Eu7.js";import{_ as j}from"./ProcessUsageList.vue_vue_type_script_setup_true_lang-V6E3C4p_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E=x("dailyUsage",()=>{const l=n({}),o=n({});return{hourlyUsageSummaries:l,topProcessessUsages:o,getHourlyUsageSummary:async e=>{if(!l.value[e]){const t=await h.getDailyUsageSummary(e);l.value[e]=t}return l.value[e]},getTopProcessessUsage:async e=>{if(!o.value[e]){const t=await h.getTopProcessesUsageRange(e,e,10);o.value[e]=t}return o.value[e]}}}),O={class:"rounded-xl mt-4 p-4 bg-white dark:bg-neutral-800"},q={class:"flex flex-col gap-2 items-center"},z={class:"flex items-center border border-gray-400 rounded-full py-1 px-2"},G=["disabled"],J={class:"font-bold text-lg"},K={class:"w-full"},L={class:"rounded-xl mt-4 p-4 bg-white dark:bg-neutral-800"},ae=b({__name:"DailyScreenTime",setup(l){const o=P(),c=B(),m=E(),e=n(parseInt(o.params.daysAgo)||0),t=n(new Date),d=n([]),g=n([]),p=k(()=>d.value.reduce((a,u)=>a+u,0)),w=()=>{c.push({name:"DailyScreenTime",params:{daysAgo:(e.value+1).toString()}})},S=()=>{c.push({name:"DailyScreenTime",params:{daysAgo:(e.value-1).toString()}})},U=a=>{c.push({name:"DailyProcessUsage",params:{processName:a,date:D(t.value)}})},y=async()=>{const a=new Date;a.setDate(a.getDate()-e.value),t.value=a;const u=D(t.value);d.value=await m.getHourlyUsageSummary(u),g.value=await m.getTopProcessessUsage(u)};return T(async()=>{await y()}),C(()=>o.params.daysAgo,async a=>{e.value=parseInt(a)||0,await y()}),(a,u)=>{const _=M("el-icon");return H(),A(I,null,[s("div",O,[s("div",q,[s("div",z,[s("button",{onClick:w,class:"flex items-center cursor-pointer"},[r(_,null,{default:f(()=>[r(i(N))]),_:1})]),s("span",null,v(e.value===0?"今日":e.value===1?"昨日":i(F)(t.value))+"使用时长",1),s("button",{onClick:S,disabled:e.value===0,class:"flex items-center cursor-pointer"},[r(_,null,{default:f(()=>[r(i(R))]),_:1})],8,G)]),s("span",J,v(i(V)(p.value)),1)]),s("div",K,[r($,{usage:d.value},null,8,["usage"])])]),s("div",L,[r(j,{usage:g.value,totalDurationMs:p.value,onItemClick:U},null,8,["usage","totalDurationMs"])])],64)}}});export{ae as default};
