import{h as C,f as n,u as R,i as x,j as M,k as U,c as b,a as t,b as u,r as c,w as h,g as f,d as S,n as I,o as P}from"./index-JQ9_-VXF.js";import{_ as T}from"./DateRangeUsageBarChart.vue_vue_type_script_setup_true_lang-DMrf2qfI.js";import{_ as Y}from"./ProcessUsageList.vue_vue_type_script_setup_true_lang-BgvIoREi.js";import"./UsageBarChart.vue_vue_type_script_setup_true_lang-CyE9e18e.js";const B={class:"w-full h-full"},N={class:"card flex flex-row gap-10 justify-center"},j={class:"mt-4 card"},E={class:"w-full"},$={class:"mt-4 card"},H=C({__name:"CustomRangeScreenTime",setup(q){const a=R(),v=I(),s=n(a.params.startDate||null),l=n(a.params.endDate||null),o=n(parseInt(a.params.limit)||10),r=n([s.value,l.value]),m=n([]),d=n([]),g=x(()=>m.value.reduce((i,e)=>i+e.durationMs,0)),D=i=>{v.push({name:"DateRangeProcessUsage",params:{processName:i,startDate:s.value,endDate:l.value}})},y=()=>{v.push({name:"CustomRangeScreenTime",params:{startDate:r.value[0],endDate:r.value[1],limit:o.value}})},_=async()=>{s.value!==null&&l.value!==null?(m.value=await f.getUsageSummaryRange(s.value,l.value),d.value=await f.getTopProcessesUsageRange(s.value,l.value,o.value)):(m.value=[],d.value=[])};return M(async()=>{await _()}),U([()=>a.params.startDate,()=>a.params.endDate,()=>a.params.limit],async()=>{s.value=a.params.startDate||null,l.value=a.params.endDate||null,o.value=parseInt(a.params.limit)||10,await _()}),(i,e)=>{const w=c("el-date-picker"),V=c("el-input-number"),k=c("el-button");return P(),b("div",B,[t("div",N,[t("div",null,[e[2]||(e[2]=t("span",null,"起止日期：",-1)),u(w,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=p=>r.value=p),type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-M-D"},null,8,["modelValue"])]),t("div",null,[e[3]||(e[3]=t("span",null,"显示程序的个数：",-1)),u(V,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=p=>o.value=p),min:1},null,8,["modelValue"])]),t("div",null,[u(k,{type:"primary",onClick:y},{default:h(()=>e[4]||(e[4]=[S("查询")])),_:1,__:[4]})])]),t("div",j,[t("div",E,[u(T,{usage:m.value},null,8,["usage"])])]),t("div",$,[u(Y,{usage:d.value,totalDurationMs:g.value,onItemClick:D},null,8,["usage","totalDurationMs"])])])}}});export{H as default};
