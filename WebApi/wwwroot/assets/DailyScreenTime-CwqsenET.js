import{e as P,f as l,g as v,h as T,u as k,i as x,j as C,k as b,c as A,a as e,b as n,w as f,r as M,t as h,l as i,m as I,n as B,p as D,o as H,q as N,s as R}from"./index-nyYPvmTa.js";import{f as V}from"./UsageBarChart.vue_vue_type_script_setup_true_lang-DYswpI6B.js";import{_ as $}from"./ProcessUsageList.vue_vue_type_script_setup_true_lang-BUPMjN7J.js";import{_ as j}from"./DailyUsageBarChart.vue_vue_type_script_setup_true_lang-CLkxnv4E.js";const q=P("dailyUsage",()=>{const r=l({}),o=l({});return{hourlyUsageSummaries:r,topProcessessUsages:o,getHourlyUsageSummary:async a=>{if(!r.value[a]){const t=await v.getDailyUsageSummary(a);r.value[a]=t}return r.value[a]},getTopProcessessUsage:async a=>{if(!o.value[a]){const t=await v.getTopProcessesUsageRange(a,a,10);o.value[a]=t}return o.value[a]}}}),E={class:"w-full h-full"},O={class:"card"},z={class:"flex flex-col gap-2 items-center"},F={class:"content-switcher"},G=["disabled"],J={class:"font-bold text-lg"},K={class:"w-full"},L={class:"mt-4 card"},Z=T({__name:"DailyScreenTime",setup(r){const o=k(),u=B(),m=q(),a=l(parseInt(o.params.daysAgo)||0),t=l(new Date),g=l([]),d=l([]),p=x(()=>g.value.reduce((s,c)=>s+c,0)),w=()=>{u.push({name:"DailyScreenTime",params:{daysAgo:(a.value+1).toString()}})},S=()=>{u.push({name:"DailyScreenTime",params:{daysAgo:(a.value-1).toString()}})},U=s=>{u.push({name:"DailyProcessUsage",params:{processName:s,date:D(t.value)}})},_=async()=>{const s=new Date;s.setDate(s.getDate()-a.value),t.value=s;const c=D(t.value);g.value=await m.getHourlyUsageSummary(c),d.value=await m.getTopProcessessUsage(c)};return C(async()=>{await _()}),b(()=>o.params.daysAgo,async s=>{a.value=parseInt(s)||0,await _()}),(s,c)=>{const y=M("el-icon");return H(),A("div",E,[e("div",O,[e("div",z,[e("div",F,[e("button",{onClick:w},[n(y,null,{default:f(()=>[n(i(N))]),_:1})]),e("span",null,h(a.value===0?"今日":a.value===1?"昨日":i(I)(t.value))+"使用时长",1),e("button",{onClick:S,disabled:a.value===0},[n(y,null,{default:f(()=>[n(i(R))]),_:1})],8,G)]),e("span",J,h(i(V)(p.value)),1)]),e("div",K,[n(j,{usage:g.value},null,8,["usage"])])]),e("div",L,[n($,{usage:d.value,totalDurationMs:p.value,onItemClick:U},null,8,["usage","totalDurationMs"])])])}}});export{Z as default};
